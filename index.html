<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
    <link rel="apple-touch-icon" href="images/icon.png" />
    
    <title>Mobile Music</title>
    
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.css" />
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/jplayer.blue.monday.css">  
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.mobile.js"></script>
	<script type="text/javascript" src="js/jquery.tmpl.js"></script>
    <script type="text/javascript" src="js/jquery.urlshortener.js"></script>
    <script type="text/javascript" src="js/jquery.jplayer.min.js"></script>
    <script type="text/javascript" src="js/jquery.json.js"></script>
    <script type="text/javascript" src="js/jquery.jStorage.js"></script>
    <script type="text/javascript" src="js/knockout.js"></script>
	<script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/oauth.js"></script>
    <script type="text/javascript" src="js/sha1.js"></script>
    <script type="text/javascript" src="js/rc4.js"></script>

    
	<script id="searchTemplate" type="text/html">
		<form method="post" data-ajax="false" onsubmit="return PPL.search.submit(this);">
			<div data-role="fieldcontain">
				<label for="search" class="searchlabel">
					<span class="searchlabelText">Search&nbsp;</span>
					<input type="search" name="searchBox" placeHolder="Search Songs" onkeyup="PPL.search.autoSubmit(this)">
				</label>
			</div>
		</form>
    </script>
    
	<script id="trackTemplate" type="text/html">
		<li>
			<a href="${$data.song_url}" data-bind="click: open">
				<img data-bind="attr: { src: $data.albumImage }" />
				<h3>${$data.artist}</h3>
				<p>${$data.title}</p>
				<span class="ui-li-count">${$data.duration}</span>
			</a>	
			<a data-bind="click: setActiveTrack" href="#track-view?linkid=${$data.linkid}" data-rel="dialog" data-transition="pop">More Options</a>			
		</li>
    </script>
    
	<script id="historyTemplate" type="text/html">
		<li>
			<a href="#search-results?keyword=${$data.keyword}">
				${$data.keyword} 
				<span class="ui-li-count">${$data.count}</span>
			</a>
			<a data-bind="click: remove" data-icon="delete">Delete From History</a>
		</li>	
    </script>
    
	<!--		{{if PPL.playlists.getAll().indexOf($data) == 0}}
			<li data-role="list-divider">Saved Playlists</li>
		{{/if}}	-->
	<script id="playlistTemplate" type="text/html">	
		<li><a href="#saved-playlists?name=${ $data.name }">${ $data.name }</a></li>
    </script>
	
	<script id="addPlaylistTemplate" type="text/html">	
		<li data-bind="click: addActiveTrack"><a href="#playlist-view?name=${ $data.name }">${ $data.name }</a></li>
    </script>	
    
	<script id="navbarTemplate" type="text/html">
		<div data-role="navbar">	
			<ul>
				<li><a href="index.html#main-page">Home</a></li>
				<li><a href="index.html#search-results?keyword=${ PPL.search.activePage().keyword }" class="ui-btn-active ui-state-persist">Search</a></li>
				<li><a href="index.html#playlists-view">Playlists</a></li>
			</ul>
		</div>
    </script>
    
	<script id="playerTemplate" type="text/html">
        <div id="jp_container_1" data-role="none" class="jp-audio">
            <div class="jp-type-single">
                <div class="jp-gui jp-interface">
                    <ul class="jp-controls">

                        <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                        <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                        <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                        <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                        <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                        <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>

                    </ul>
                    <div class="jp-progress">
                        <div class="jp-seek-bar">
                            <div class="jp-play-bar"></div>
                        </div>
                    </div>
                    <div class="jp-volume-bar">
                        <div class="jp-volume-bar-value"></div>
                    </div>

                    <div class="jp-time-holder">
                        <div class="jp-current-time"></div>
                        <div class="jp-duration"></div>

                        <ul class="jp-toggles">
                            <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
                            <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
                        </ul>

                    </div>
                </div>
                <div class="jp-no-solution">

                    <span>Update Required</span>
                    To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                </div>
            </div>
        </div>
    </script>	
</head>

<body>
    
    <div id="main-page" data-role="page" class="type-index" data-dom-cache="true">
    
        <div data-role="header" data-position="fixed" data-bind="template: { name: 'searchTemplate' }">
        </div><!-- /header -->
    
        <div data-role="content">	
        	<ul data-role="listview" data-theme="c" data-dividertheme="d" data-inset="true" style="margin-bottom:0;"><li data-role="list-divider">Search History</li></ul>
			<ul class="historyTemplate" data-role="listview" data-theme="c" data-dividertheme="d" style="margin-top:0;" data-inset="true" data-bind="template: { name: 'historyTemplate', foreach: PPL.search.history.getItems() }">
            </ul>
            <ul data-role="listview" data-theme="c" data-dividertheme="d" data-inset="true"  data-bind="template: { name: 'playlistTemplate', foreach: PPL.playlists.getAll() }">
            </ul>
		</div><!-- /content -->
		
        <div data-role="footer" data-position="fixed" data-id="navbar">
    		<div style="background-color:#EEE;" data-bind="template: { name: 'playerTemplate' }"></div>
        </div><!-- /footer -->      
    </div><!-- /page -->
         

    <div id="search-results" data-role="page" data-dom-cache="true">

        <div data-role="header"> 
            <span data-bind="template: { name: 'searchTemplate' }"></span>
        </div><!-- /header -->
        
		<div data-role="content">
            <div class="content-primary">
				<ul data-role="listview" data-theme="c" data-dividertheme="d" style="padding-bottom:15px;"><li data-role="list-divider">Search Results</li></ul>
                <ul data-role="listview"  data-theme="c" data-dividertheme="d" data-bind="template: { name: 'trackTemplate', foreach: PPL.search.activePage().tracks() }" data-filter="true" data-filter-placeholder="Search within results" data-filter-theme="d">
                </ul>
            </div>
 		   <div class="content-secondary">
    
                <div data-role="collapsible" data-collapsed="true" data-theme="a">
					<ul data-role="listview" data-theme="c" data-dividertheme="d" style="padding-bottom:15px;"><li data-role="list-divider">Search History</li></ul>
                    <ul class="historyTemplate" data-role="listview" data-theme="c" style="padding-bottom:15px;" data-dividertheme="d" data-bind="template: { name: 'historyTemplate', foreach: PPL.search.history.getItems() }">
                    </ul>
                    <ul data-role="listview" data-theme="c" data-dividertheme="d" data-bind="template: { name: 'playlistTemplate', foreach: PPL.playlists.getAll() }">
                    </ul>
                </div>
            </div>	
        </div>
        
        <div data-role="footer" data-position="fixed" data-id="navbar">
    		<div style="background-color:#EEE;" data-bind="template: { name: 'playerTemplate' }"></div>
            <div data-bind="template: { name: 'navbarTemplate' }"></div>
        </div><!-- /footer -->        
    </div>
    

    <div id="playlists-view" data-role="page" class="type-index" data-dom-cache="true">
    
        <div data-role="header" data-position="fixed">
        	<h1>Saved Playlists</h1>
        </div><!-- /header -->
    
        <div data-role="content">	
            <ul data-role="listview" data-theme="c" data-dividertheme="d" data-inset="true"  data-bind="template: { name: 'playlistTemplate', foreach: PPL.playlists.getAll() }">
            </ul>
		</div><!-- /content -->
		
        <div data-role="footer" data-position="fixed" data-id="navbar">
    		<div style="background-color:#EEE;" data-bind="template: { name: 'playerTemplate' }"></div>
			<div data-bind="template: { name: 'navbarTemplate' }"></div>
        </div><!-- /footer -->      
    </div><!-- /page -->
	
	<div id="add-playlists-view" data-role="page" class="type-index" data-dom-cache="true">
    
        <div data-role="header" data-position="fixed">
        	<h1>Add Song To Playlist</h1>
        </div><!-- /header -->
    
        <div data-role="content">	
            <ul data-role="listview" data-theme="c" data-dividertheme="d" data-inset="true"  data-bind="template: { name: 'addPlaylistTemplate', foreach: PPL.playlists.getAll() }">
            </ul>
		</div><!-- /content -->
		
        <div data-role="footer" data-position="fixed" data-id="navbar">
    		<div style="background-color:#EEE;" data-bind="template: { name: 'playerTemplate' }"></div>
			<div data-bind="template: { name: 'navbarTemplate' }"></div>
        </div><!-- /footer -->      
    </div><!-- /page -->

    <div id="playlist-view" data-role="page" class="type-index" data-dom-cache="true">
    
        <div data-role="header" data-position="fixed">
        	<h1 data-bind="text: PPL.activePlaylist().name"></h1>
        </div><!-- /header -->
    
        <div data-role="content">	
            <ul data-role="listview"  data-theme="c" data-dividertheme="d" data-bind="template: { name: 'trackTemplate', foreach: PPL.activePlaylist().tracks() }" data-filter="true" data-filter-placeholder="Search within playlist" data-filter-theme="d"></ul>
		</div><!-- /content -->
		
        <div data-role="footer" data-position="fixed" data-id="navbar">
    		<div style="background-color:#EEE;" data-bind="template: { name: 'playerTemplate' }"></div>
			<div data-bind="template: { name: 'navbarTemplate' }"></div>
        </div><!-- /footer -->      
    </div><!-- /page -->
	
    <div id="track-view" data-role="page">

		<div data-role="header" data-theme="a">
			<h1>Other Options</h1>
		</div><!-- /header -->

		<div data-role="content" data-theme="a">
        	<div class="trackPlaceholder">
                <ul data-role="listview" data-dividertheme="a" data-theme="a">
                    <li>
                        <img data-bind="attr: { src: PPL.activeTrack().albumImage() }" />
                        <h3 data-bind="text: PPL.activeTrack().artist"></h3>
                        <p data-bind="text: PPL.activeTrack().title"></p>
                        <span class="ui-li-count" data-bind="text: PPL.activeTrack().duration"></span>
                    </li>
                </ul>
            </div>
			<a data-bind="attr: { href: PPL.activeTrack().song_url }" data-role="button" data-theme="b">Download</a>
            <a href="index.html#add-playlists-view" data-role="button" data-theme="b">Add to Playlist</a>
			<a data-role="button" onclick="PPL.activeTrack().promptMoreOfArtist()">Find More By This Artist</a>
            <a data-role="button" onclick="PPL.activeTrack().fetchShortUrl()">Share Music Link</a>
            <span data-bind="visible: PPL.activeTrack().short_url() != ''">
                <div data-role="fieldcontain">
                    <label for="share">Copy To Share:</label>
                    <input type="text" id="share" data-bind="value: PPL.activeTrack().short_url()"  />
                </div>
            </span>
			<a href="index.html" data-role="button" data-rel="back">Go Back</a>
		</div>

        <div data-role="footer" data-position="fixed" data-id="navbar" data-bind="template: { name: 'navbarTemplate' }">
        </div><!-- /footer -->        
        
	</div><!-- /page -->
    
	<div id="jquery_jplayer_1" class="jp-jplayer"></div>
</body>
</html>

